{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}

<style>
    .container { max-width: 100% !important; padding: 0 !important; margin: 0 !important; }
    body { background-color: #0a0a0a; color: #fff; }

    .lp-section { padding: 90px 20px; }
    .lp-inner { max-width: 1200px; margin: 0 auto; }

    /* Reveal on scroll */
    .reveal { opacity: 0; transform: translateY(16px); transition: 550ms ease; }
    .reveal.is-visible { opacity: 1; transform: translateY(0); }

    /* Hero */
    .hero {
        position: relative;
        padding: 110px 20px 70px;
        background: radial-gradient(1200px 600px at 70% 10%, rgba(0, 150, 136, 0.22), transparent 55%);
        border-bottom: 1px solid #1f1f1f;
        overflow: hidden;
    }
    .hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background:
            linear-gradient(90deg, rgba(0,0,0,0.62) 0%, rgba(0,0,0,0.38) 45%, rgba(0,0,0,0.12) 100%),
            linear-gradient(rgba(0,0,0,0.24), rgba(0,0,0,0.60));
        z-index: 1;
        pointer-events: none;
    }
    .hero-bg {
        position: absolute;
        inset: -40px;
        z-index: 0;
        opacity: 0.74;
        pointer-events: none;
        filter: brightness(1.20) saturate(1.10) contrast(1.03);
    }
    .hero-grid { position: relative; z-index: 2; max-width: 1200px; margin: 0 auto; }
    .hero-content h1 { font-size: 3.2rem; font-weight: 800; margin: 0 0 16px; letter-spacing: -1px; line-height: 1.05; }
    .hero-content p { font-size: 1.1rem; margin: 0 0 26px; color: rgba(255,255,255,0.78); max-width: 52ch; }
    .hero span { color: var(--primary); }

    /* Mantém legibilidade mesmo com fundo mais claro */
    .hero-content h1 { text-shadow: 0 10px 32px rgba(0,0,0,0.55); }
    .hero-content p { text-shadow: 0 8px 24px rgba(0,0,0,0.55); }
    .hero-badges { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 16px; }
    .hero-badge { border: 1px solid rgba(255,255,255,0.18); background: rgba(255,255,255,0.06); padding: 10px 14px; border-radius: 999px; font-size: 0.85rem; color: rgba(255,255,255,0.8); }

    /* Botões */
    .hero-actions { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 4px; }
    .btn-hero { padding: 14px 32px; border-radius: 999px; font-weight: 800; text-decoration: none; font-size: 1rem; transition: 0.25s; display: inline-flex; gap: 10px; align-items: center; justify-content: center; box-sizing: border-box; max-width: 100%; }
    .btn-primary-hero { background: var(--primary); color: white; border: 2px solid var(--primary); }
    .btn-primary-hero:hover { background: var(--primary-dark); border-color: var(--primary-dark); transform: translateY(-2px); }
    .btn-outline-hero { background: transparent; color: white; border: 2px solid rgba(255,255,255,0.9); }
    .btn-outline-hero:hover { background: white; color: #000; transform: translateY(-2px); }

    /* Hero mosaic */
    .hero-mosaic {
        height: 100%;
        display: grid;
        grid-template-columns: repeat(8, minmax(0, 1fr));
        gap: 12px;
        align-content: center;
    }
    .mosaic-card { position: relative; border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); }
    .mosaic-card::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.55), rgba(0,0,0,0)); }
    .mosaic-card img { width: 100%; height: 100%; display: block; object-fit: cover; aspect-ratio: 3 / 4; transform: scale(1.01); }

    /* Stats */
    .stats-section { background: #0f0f0f; padding: 58px 0; border-bottom: 1px solid #1f1f1f; }
    .stats-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 18px; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .stat-item { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.10); border-radius: 18px; padding: 22px 22px; }
    .stat-item h3 { font-size: 2.4rem; color: var(--primary); margin: 0; font-weight: 900; letter-spacing: -0.5px; }
    .stat-item p { color: rgba(255,255,255,0.72); margin: 8px 0 0; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 2px; }

    /* Section titles */
    .section-title { text-align: center; margin-bottom: 54px; }
    .section-title h2 { font-size: 2.4rem; font-weight: 800; margin: 0 0 12px; letter-spacing: -0.5px; }
    .section-title p { margin: 0; color: rgba(255,255,255,0.75); }

    /* Why Us */
    .why-us { padding: 90px 20px; }
    .features-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 18px; }
    .feature-card { background: rgba(255,255,255,0.04); padding: 28px; border-radius: 18px; border: 1px solid rgba(255,255,255,0.10); transition: 0.25s; }
    .feature-card:hover { border-color: rgba(0,150,136,0.7); transform: translateY(-4px); }
    .feature-icon { font-size: 40px; color: var(--primary); margin-bottom: 16px; }
    .feature-card h4 { margin: 0 0 8px; }
    .feature-card p { margin: 0; color: rgba(255,255,255,0.74); line-height: 1.6; }

    /* Gallery */
    .gallery { background: #0f0f0f; border-top: 1px solid #1f1f1f; border-bottom: 1px solid #1f1f1f; }
    .gallery-grid { display: grid; grid-template-columns: repeat(6, minmax(0, 1fr)); gap: 14px; }
    .gallery-card { position: relative; border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); }
    .gallery-card img { width: 100%; height: 100%; object-fit: cover; display: block; aspect-ratio: 3 / 4; transition: transform 350ms ease; }
    .gallery-overlay {
        position: absolute; inset: 0;
        display: flex; flex-direction: column; justify-content: flex-end;
        padding: 14px;
        background: linear-gradient(to top, rgba(0,0,0,0.78), rgba(0,0,0,0));
        opacity: 0; transform: translateY(8px);
        transition: 260ms ease;
    }
    .gallery-card:hover img { transform: scale(1.06); }
    .gallery-card:hover .gallery-overlay { opacity: 1; transform: translateY(0); }
    .gallery-overlay .client { font-weight: 800; letter-spacing: -0.2px; }
    .gallery-overlay .role { font-size: 0.9rem; color: rgba(255,255,255,0.82); margin-top: 3px; }

    /* Services */
    .services { background: #0a0a0a; padding: 90px 20px; }
    .services-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 14px; }
    .service-card {
        border-radius: 18px;
        border: 1px solid rgba(255,255,255,0.10);
        background: radial-gradient(800px 240px at 30% 0%, rgba(0, 150, 136, 0.16), transparent 60%),
                    rgba(255,255,255,0.04);
        padding: 22px;
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        gap: 12px;
        transition: 220ms ease;
    }
    .service-card:hover { transform: translateY(-3px); border-color: rgba(0,150,136,0.55); }
    .service-icon {
        width: 52px;
        height: 52px;
        border-radius: 14px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 150, 136, 0.14);
        border: 1px solid rgba(0, 150, 136, 0.22);
        color: var(--primary);
    }
    .service-icon i { font-size: 28px; }
    .service-title { font-weight: 900; letter-spacing: -0.2px; font-size: 1.05rem; }

    /* CTA actions */
    .cta-actions { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }

    /* CTA */
    .cta-section { background: linear-gradient(90deg, rgba(0, 77, 64, 1), rgba(0, 150, 136, 1)); padding: 80px 20px; text-align: center; }
    .cta-content h2 { font-size: 2.4rem; margin: 0 0 12px; font-weight: 900; letter-spacing: -0.5px; }
    .cta-content p { margin: 0 0 18px; color: rgba(255,255,255,0.9); }
    
    @media (max-width: 1100px) {
        .hero { padding-top: 95px; }
        .hero-bg { inset: -20px; opacity: 0.68; }
        .hero-mosaic { grid-template-columns: repeat(6, minmax(0, 1fr)); }
        .gallery-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .features-grid { grid-template-columns: 1fr; }
        .services-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    @media (max-width: 768px) {
        .hero { padding-top: 90px; }
        .hero::after {
            background:
                linear-gradient(180deg, rgba(0,0,0,0.52) 0%, rgba(0,0,0,0.74) 100%);
        }
        .hero-bg { opacity: 0.66; filter: brightness(1.26) saturate(1.12) contrast(1.02); }
        .hero-mosaic { grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 10px; }
        .hero-content h1 { font-size: 2.4rem; }
        .stats-grid { grid-template-columns: 1fr; }
        .gallery-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .hero-actions { flex-direction: column; }
        .btn-hero { width: 100%; }
        .services-grid { grid-template-columns: 1fr; }
        .cta-actions { flex-direction: column; align-items: stretch; }
    }
</style>

<section class="hero">
    <div class="hero-bg" aria-hidden="true">
        <div class="hero-mosaic">
            {% for item in landing_gallery|slice:":16" %}
                <div class="mosaic-card">
                    <img src="{{ item.image_url }}" alt="">
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="hero-grid">
        <div class="hero-content reveal">
            <h1>Excelência em equipe<br>para o seu <span>Evento</span></h1>
            <p>A OpenCasting conecta marcas aos profissionais certos, com tecnologia, agilidade e documentação validada.</p>
            <div class="hero-actions">
                <a href="#orcamento" class="btn-hero btn-primary-hero"><i class="material-icons" style="font-size: 20px;">business</i> Solicitar orçamento</a>
                {% if not user.is_authenticated %}
                    <a href="{% url 'login' %}" class="btn-hero btn-outline-hero"><i class="material-icons" style="font-size: 20px;">person</i> Sou promotor</a>
                {% else %}
                    <a href="{% url 'lista_vagas' %}" class="btn-hero btn-outline-hero"><i class="material-icons" style="font-size: 20px;">dashboard</i> Acessar painel</a>
                {% endif %}
            </div>
            <div class="hero-badges">
                <div class="hero-badge">Equipe verificada</div>
                <div class="hero-badge">Entrega rápida</div>
                <div class="hero-badge">Atendimento nacional</div>
            </div>
        </div>
    </div>
</section>

<div class="stats-section">
    <div class="stats-grid">
        <div class="stat-item reveal">
            <h3 class="counter" data-target="5000" data-prefix="+" data-suffix="">0</h3>
            <p>Promotores cadastrados</p>
        </div>
        <div class="stat-item reveal">
            <h3 class="counter" data-target="98" data-prefix="" data-suffix="%">0</h3>
            <p>Taxa de aprovação</p>
        </div>
        <div class="stat-item reveal">
            <h3 class="counter" data-target="100" data-prefix="" data-suffix="%">0</h3>
            <p>Atendimento nacional</p>
        </div>
    </div>
</div>

<section class="why-us lp-section">
    <div class="lp-inner">
        <div class="section-title reveal">
            <h2>Por que a OpenCasting?</h2>
            <p>Tecnologia e processo para escalar seu evento com segurança.</p>
        </div>
        <div class="features-grid">
            <div class="feature-card reveal">
                <i class="material-icons feature-icon">verified_user</i>
                <h4>Segurança</h4>
                <p>Perfis com documentação e validação antes de entrar na equipe.</p>
            </div>
            <div class="feature-card reveal">
                <i class="material-icons feature-icon">devices</i>
                <h4>Tecnologia</h4>
                <p>Plataforma própria para organizar cadastro, seleção e gestão de talentos.</p>
            </div>
            <div class="feature-card reveal">
                <i class="material-icons feature-icon">speed</i>
                <h4>Agilidade</h4>
                <p>Resposta rápida na montagem da equipe e suporte durante a operação.</p>
            </div>
        </div>
    </div>
</section>

<section class="gallery lp-section">
    <div class="lp-inner">
        <div class="section-title reveal">
            <h2>Nossa equipe em ação</h2>
            <p>Passe o mouse nas fotos para ver exemplos de contratantes (você pode editar depois).</p>
        </div>

        <div class="gallery-grid">
            {% for item in landing_gallery %}
                <div class="gallery-card reveal">
                    <img src="{{ item.image_url }}" alt="Foto de promotor">
                    <div class="gallery-overlay">
                        <div class="client">{{ item.client_name }}</div>
                        <div class="role">{{ item.role_name }}</div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="services">
    <div class="lp-inner">
        <div class="section-title reveal"><h2 style="color:white; margin: 0;">Soluções completas</h2></div>
        <div class="services-grid">
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">event</i></div>
                <div class="service-title">Feiras e congressos</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">support_agent</i></div>
                <div class="service-title">Recepção</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">restaurant</i></div>
                <div class="service-title">Degustação</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">local_bar</i></div>
                <div class="service-title">Bartender</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">room_service</i></div>
                <div class="service-title">Garçom / Garçonete</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">photo_camera</i></div>
                <div class="service-title">Modelo</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">security</i></div>
                <div class="service-title">Segurança</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">pets</i></div>
                <div class="service-title">Mascote</div>
            </div>
            <div class="service-card reveal">
                <div class="service-icon"><i class="material-icons">qr_code_scanner</i></div>
                <div class="service-title">Controlador de acesso</div>
            </div>
        </div>
    </div>
</section>

<section id="orcamento" class="cta-section">
    <div class="cta-content">
        <h2>Eleve o nível do seu evento</h2>
        <p>Fale conosco agora pelo WhatsApp.</p>
        <div class="cta-actions">
            {% if contato_whatsapp_principal %}
                <a href="https://wa.me/55{{ contato_whatsapp_principal.valor|phone_digits }}" target="_blank" class="btn-hero" style="background: white; color: #009688;">
                    <i class="material-icons" style="font-size: 20px;">chat</i> WhatsApp
                </a>
            {% endif %}
            {% if contato_email_principal %}
                <a href="mailto:{{ contato_email_principal.valor }}" class="btn-hero" style="background: transparent; border: 2px solid white; color: white;">
                    <i class="material-icons" style="vertical-align: middle;">email</i> E-mail
                </a>
            {% endif %}
        </div>
    </div>
</section>

<script>
    (function () {
        const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        const formatNumber = (value) => {
            try {
                return new Intl.NumberFormat('pt-BR').format(value);
            } catch {
                return String(value);
            }
        };

        const animateCounter = (el) => {
            if (el.dataset.animated === 'true') return;
            el.dataset.animated = 'true';

            const target = Number(el.dataset.target || '0');
            const prefix = el.dataset.prefix || '';
            const suffix = el.dataset.suffix || '';

            if (prefersReduced) {
                el.textContent = `${prefix}${formatNumber(target)}${suffix}`;
                return;
            }

            const durationMs = 900;
            const start = performance.now();

            const easeOutCubic = (t) => 1 - Math.pow(1 - t, 3);

            const tick = (now) => {
                const progress = Math.min(1, (now - start) / durationMs);
                const eased = easeOutCubic(progress);
                const current = Math.floor(target * eased);
                el.textContent = `${prefix}${formatNumber(current)}${suffix}`;

                if (progress < 1) {
                    requestAnimationFrame(tick);
                } else {
                    el.textContent = `${prefix}${formatNumber(target)}${suffix}`;
                }
            };

            requestAnimationFrame(tick);
        };

        const observer = new IntersectionObserver(
            (entries) => {
                for (const entry of entries) {
                    if (!entry.isIntersecting) continue;
                    entry.target.classList.add('is-visible');
                    if (entry.target.classList.contains('counter')) {
                        animateCounter(entry.target);
                    }
                    observer.unobserve(entry.target);
                }
            },
            { threshold: 0.25 }
        );

        document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));
        document.querySelectorAll('.counter').forEach((el) => observer.observe(el));
    })();
</script>

{% endblock %}

{% block footer %}
<style>
    .site-footer { background-color: #0a0a0a; color: #b0b0b0; padding: 60px 0 20px; font-size: 0.9rem; border-top: 1px solid #222; }
    .footer-content { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; padding: 0 20px; }
    .footer-col h4 { color: white; margin-bottom: 20px; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; }
    .footer-links { list-style: none; padding: 0; }
    .footer-links li { margin-bottom: 10px; }
    .footer-links a { color: #b0b0b0; text-decoration: none; transition: 0.3s; display: block; }
    .footer-links a:hover { color: var(--primary); padding-left: 5px; }
    .footer-bottom { text-align: center; margin-top: 60px; padding-top: 20px; border-top: 1px solid #222; font-size: 0.8rem; }
    .dev-tag { color: var(--primary); font-weight: bold; text-decoration: none; }
</style>

<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-col">
            <h4>{{ config_site.titulo_site|default:"OpenCasting" }}</h4>
            <p>{{ config_site.texto_sobre_curto|default:"Conectamos as melhores marcas aos profissionais mais qualificados."|safe }}</p>
        </div>
        <div class="footer-col">
            <h4>Navegação</h4>
            <ul class="footer-links">
                <li><a href="{% url 'lista_vagas' %}">Mural de Vagas</a></li>
                <li><a href="{% url 'cadastro' %}">Cadastro</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Contato</h4>
            <ul class="footer-links">
                {% if contatos_por_tipo.telefone %}
                    {% for c in contatos_por_tipo.telefone %}<li>{{ c.valor }}</li>{% endfor %}
                {% endif %}
                {% if contatos_por_tipo.email %}
                    {% for c in contatos_por_tipo.email %}<li>{{ c.valor }}</li>{% endfor %}
                {% endif %}
            </ul>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; {% now "Y" %} {{ config_site.titulo_site|default:"OpenCasting" }}. Todos os direitos reservados.</p>
        <p>Desenvolvido por <a href="#" class="dev-tag">GOUVEA AUTOMAÇÕES</a></p>
    </div>
</footer>
{% endblock %}